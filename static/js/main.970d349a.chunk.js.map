{"version":3,"sources":["components/shop-header/shop-header.jsx","components/book-list-item/book-list-item.jsx","components/spinner/spinner.jsx","components/error-indicator/error-indicator.jsx","components/bookstore-service-context/bookstoreservicecontext.jsx","components/hoc/with-bookstore-service.jsx","actions/index.jsx","utils/compose.jsx","components/book-list/book-list.jsx","components/shopping-cart-table/shopping-cart-table.jsx","components/pages/home-page.jsx","components/pages/cart-page.jsx","components/app/app.jsx","components/error-boundry/error-boundry.jsx","services/bookstore-service.jsx","reducers/book-list.jsx","reducers/shopping-cart.jsx","reducers/index.jsx","store.js","index.js"],"names":["connect","shoppingCart","cartItems","orderTotal","numItems","length","total","className","to","href","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","onClick","Spinner","CircularProgress","color","ErrorIndicator","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","bookAddedToCart","bookId","type","payload","bookRemovedFromCart","allBooksRemovedFromCart","fetchBooks","dispatch","getBooks","then","data","catch","err","compose","funcs","comp","reduceRight","wrapped","f","BookList","books","map","id","BookListContainer","this","loading","error","Component","bookList","mapDispatchToProps","onIncrease","onDecrease","onDelete","items","item","idx","count","HomePage","bookPrice","height","width","App","role","path","component","exact","CartPage","ErrorBoundry","state","hasError","setState","children","BookstoreService","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","slice","updateOrder","quantity","find","itemIndex","findIndex","newItem","updateCartItem","newTotal","newCount","cartItemList","forEach","updateShoppingCart","reducer","store","createStore","subscribe","console","log","getState","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.970d349a.chunk.js","sourcesContent":["import React from 'react';\r\nimport './shop-header.css';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux'\r\n\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n    return (\r\n\r\n        <header className=\"shop-header row\">\r\n\r\n            <Link to=\"/reStore\">\r\n                <div className=\"logo text-dark\" href=\"dfasd\">Книжный магазин</div>\r\n            </Link>\r\n\r\n            <Link to=\"/cart\">\r\n                <div className=\"shopping-cart\" href=\"dasdsad\">\r\n                    <i className=\"cart-icon fa fa-shopping-cart\" />\r\n                    {numItems} items (${total})\r\n                </div>\r\n            </Link>\r\n\r\n        </header>\r\n\r\n    );\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n    return {\r\n        numItems: cartItems.length,\r\n        total: orderTotal\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);\r\n","import React from 'react'\r\nimport './book-list-item.css';\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n\r\n    const { title, author, price, coverImage } = book;\r\n    return (\r\n\r\n        <div className=\"book-list-item\">\r\n            <div className=\"book-cover\">\r\n                <img src={coverImage} alt='cover' />\r\n            </div>\r\n            <div className=\"book-details\">\r\n                <span className=\"book-title\">{title}</span>\r\n                <div className='book-author'>{author}</div>\r\n                <div className='book-price'>${price}</div>\r\n                <button\r\n                    onClick={onAddedToCart}\r\n                    className=\"btn btn-info add-to-cart\">Add to cart\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default BookListItem;","import React from 'react'\r\nimport './spinner.css'\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\n\r\nconst Spinner = () => {\r\n    return <div className='spinner'>\r\n        <CircularProgress color=\"secondary\" />\r\n    </div>\r\n};\r\n\r\nexport default Spinner;","import React from 'react'\r\nimport './error-indicator.css'\r\n\r\n\r\nconst ErrorIndicator = () => {\r\n    return <div className='error-indicator'>\r\n        <h2>Все в порядке!</h2>\r\n        <p>Это запланированная ошибка. Перезагрузите страницу.</p>\r\n    </div>\r\n};\r\n\r\nexport default ErrorIndicator;","import React from 'react'\r\n\r\n\r\nconst {\r\n    Provider: BookstoreServiceProvider,\r\n    Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    BookstoreServiceProvider,\r\n    BookstoreServiceConsumer\r\n};","import React from 'react'\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context/bookstoreservicecontext';\r\n\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n    return (props) => {\r\n        return (\r\n            <BookstoreServiceConsumer>\r\n                {\r\n                    (bookstoreService) => {\r\n                        return (\r\n                            <Wrapped {...props}\r\n                                bookstoreService={bookstoreService} />\r\n                        )\r\n                    }\r\n                }\r\n            </BookstoreServiceConsumer>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withBookstoreService;","\r\n\r\nconst booksRequested = () => {\r\n    return {\r\n        type: 'FETCH_BOOKS_REQUEST'\r\n    };\r\n};\r\n\r\nconst booksLoaded = (newBooks) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_SUCCESS',\r\n        payload: newBooks\r\n    };\r\n};\r\n\r\nconst booksError = (error) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_FAILURE',\r\n        payload: error\r\n    };\r\n};\r\n\r\nexport const bookAddedToCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_ADDED_TO_CART',\r\n        payload: bookId\r\n    };\r\n};\r\n\r\nexport const bookRemovedFromCart = (bookId) => {\r\n    return {\r\n        type: 'BOOK_REMOVED_FROM_CART',\r\n        payload: bookId,\r\n    };\r\n};\r\n\r\nexport const allBooksRemovedFromCart = (bookId) => {\r\n    return {\r\n        type: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n        payload: bookId,\r\n    };\r\n};\r\n\r\nexport const fetchBooks = (bookstoreService, dispatch) => () => {\r\n    dispatch(booksRequested());\r\n    bookstoreService.getBooks()\r\n        .then((data) => dispatch(booksLoaded(data)))\r\n        .catch((err) => dispatch(booksError(err)));\r\n}\r\n\r\n","const compose = (...funcs) => (comp) => {\r\n    return funcs.reduceRight(\r\n        (wrapped, f) => f(wrapped), comp);\r\n}\r\n\r\nexport default compose;","import React, { Component } from 'react'\r\nimport BookListItem from '../book-list-item/book-list-item';\r\nimport { connect } from 'react-redux';\r\nimport Spinner from '../spinner/spinner'\r\nimport ErrorIndicator from '../error-indicator/error-indicator'\r\nimport { withBookstoreService } from '../hoc';\r\nimport { fetchBooks, bookAddedToCart } from '../../actions';\r\nimport { compose } from '../../utils';\r\n\r\nimport './book-list.css';\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n    return (\r\n        <ul className=\"book-list\">\r\n            {\r\n                books.map((book) => {\r\n                    return (\r\n                        <li key={book.id}><BookListItem book={book}\r\n                            onAddedToCart={() => onAddedToCart(book.id, book.coverImage)} />\r\n                        </li>\r\n                    )\r\n                })\r\n            }\r\n        </ul>\r\n    )\r\n}\r\n\r\nclass BookListContainer extends Component {\r\n\r\n    componentDidMount() {\r\n        this.props.fetchBooks();\r\n    }\r\n    render() {\r\n        const { books, loading, error, onAddedToCart } = this.props;\r\n        if (loading) {\r\n            return <Spinner />\r\n        }\r\n        if (error) {\r\n            return <ErrorIndicator />\r\n        }\r\n        return <BookList books={books} onAddedToCart={onAddedToCart} />\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\r\n    return { books, loading, error }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\r\n    return {\r\n        fetchBooks: fetchBooks(bookstoreService, dispatch),\r\n        onAddedToCart: (id, coverImage) => dispatch(bookAddedToCart(id, coverImage))\r\n\r\n    };\r\n};\r\n\r\n\r\nexport default compose(\r\n    withBookstoreService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer)\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport './shopping-cart-table.css';\r\nimport {\r\n    bookAddedToCart,\r\n    bookRemovedFromCart,\r\n    allBooksRemovedFromCart\r\n} from '../../actions'\r\n\r\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n\r\n\r\n\r\n    const renderRow = (item, idx) => {\r\n        const { id, title, count, total } = item;\r\n\r\n        return (\r\n            <tr key={id}>\r\n                <td>{idx + 1}</td>\r\n                <td>{title}</td>\r\n                <td>{count}</td>\r\n                <td>{total}</td>\r\n                <td>\r\n                    <button\r\n                        onClick={() => onDelete(id)}\r\n                        className=\"btn btn-outline-danger btn-sm float-right\">\r\n                        <i className=\"fa fa-trash-o\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => onIncrease(id)}\r\n                        className=\"btn btn-outline-success btn-sm float-right\">\r\n                        <i className=\"fa fa-plus-circle\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => onDecrease(id)}\r\n                        className=\"btn btn-outline-warning btn-sm float-right\">\r\n                        <i className=\"fa fa-minus-circle\" />\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        )\r\n    }\r\n    return (\r\n        <div className=\"shopping-cart-table\">\r\n            <h2>Your Order</h2>\r\n            <table className=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>#</th>\r\n                        <th>Item</th>\r\n                        <th>Count</th>\r\n                        <th>Price</th>\r\n                        <th>Action</th>\r\n                    </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                    {items.map(renderRow)}\r\n                </tbody>\r\n            </table>\r\n\r\n            <div className=\"total\">\r\n                Total: ${total}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n    return {\r\n        items: cartItems,\r\n        total: orderTotal\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    onIncrease: bookAddedToCart,\r\n    onDecrease: bookRemovedFromCart,\r\n    onDelete: allBooksRemovedFromCart\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\r\n","import React from 'react'\r\nimport BookList from '../book-list/book-list'\r\nimport ShoppingCartTable from '../shopping-cart-table/shopping-cart-table';\r\n\r\n\r\nconst HomePage = () => {\r\n    return (\r\n        <div>\r\n            <BookList />\r\n            <ShoppingCartTable />\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default HomePage;","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport './cart-page.css'\r\nimport {\r\n    bookAddedToCart,\r\n    bookRemovedFromCart,\r\n    allBooksRemovedFromCart\r\n} from '../../actions'\r\n\r\nconst CartPage = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n    const renderRow = (item) => {\r\n        const { id, title, count, total, coverImage, bookPrice } = item;\r\n\r\n        return (\r\n            <div className='cart-item' key={id}>\r\n                <div className=\"col-md-3\">\r\n                    <img src={coverImage} alt=\"cool\" height=\"230px\" width=\"150px\" />\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                    <h3>{title}</h3>\r\n                    <p className=\"lead fw-bold\">\r\n                        {count} X  ${bookPrice} = ${total}\r\n                    </p>\r\n                    <button\r\n                        onClick={() => onIncrease(id)}\r\n                        className=\"btn btn-outline-dark\">\r\n                        <i className=\"fa fa-plus-circle\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => onDecrease(id)}\r\n                        className=\"btn btn-outline-dark\">\r\n                        <i className=\"fa fa-minus-circle\" />\r\n                    </button>\r\n                    <button\r\n                        onClick={() => onDelete(id)}\r\n                        className=\"btn btn-outline-dark\">\r\n                        <i className=\"fa fa-trash-o\" />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    return (\r\n        <div className='wrapper'>\r\n            {items.map(renderRow)}\r\n        </div>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n    return {\r\n        items: cartItems,\r\n        total: orderTotal\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    onIncrease: bookAddedToCart,\r\n    onDecrease: bookRemovedFromCart,\r\n    onDelete: allBooksRemovedFromCart\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CartPage);","import React from 'react'\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport ShopHeader from '../shop-header/shop-header';\r\nimport HomePage from '../pages/home-page';\r\nimport CartPage from '../pages/cart-page';\r\nimport './app.css'\r\n\r\n\r\nconst App = () => {\r\n\r\n\r\n    return (\r\n        <main role='main' className='container'>\r\n            <ShopHeader />\r\n            <Switch>\r\n                <Route path='/restore' component={HomePage} exact />\r\n                <Route path='/cart' component={CartPage} />\r\n            </Switch>\r\n        </main>\r\n\r\n    )\r\n};\r\n\r\nexport default (App);","import React, { Component } from 'react'\r\nimport ErrorIndicator from '../error-indicator/error-indicator';\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n    state = {\r\n        hasError: false\r\n    }\r\n\r\n    componentDidCatch() {\r\n        this.setState({ hasError: true });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        const { hasError } = this.state;\r\n\r\n        if (hasError) {\r\n            return <ErrorIndicator />\r\n        }\r\n\r\n        return this.props.children;\r\n    }\r\n};\r\n","\r\n\r\nexport default class BookstoreService {\r\n\r\n    data = [\r\n        {\r\n            id: 1,\r\n            title: 'Гарри Поттер и узник Азкабана',\r\n            author: 'Кэтлин Джоан Роулинг  ',\r\n            price: 32,\r\n            coverImage: 'https://cdn1.ozone.ru/multimedia/1011027243.jpg'\r\n        },\r\n        {\r\n            id: 2,\r\n            title: 'Властелин колец: Хранители кольца',\r\n            author: 'Джон Р.Р. Толкин',\r\n            price: 45,\r\n            coverImage: 'https://s1.livelib.ru/boocover/1000499615/o/328a/Tolkin_Dzh.R.R.__Vlastelin_kolets._Trilogiya._Kn._1._Hraniteli_koltsa.jpeg'\r\n        },\r\n    ];\r\n\r\n    getBooks() {\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n                if (Math.random() > 0.75) {\r\n                    reject(new Error('Smtng bad happened'))\r\n                } else resolve(this.data)\r\n            }, 700);\r\n        })\r\n    }\r\n}","const updateBookList = (state, action) => {\r\n    if (state === undefined) {\r\n        return {\r\n            books: [],\r\n            loading: true,\r\n            error: null\r\n        }\r\n    }\r\n    switch (action.type) {\r\n        case 'FETCH_BOOKS_REQUEST':\r\n            return {\r\n                books: [],\r\n                loading: true,\r\n                error: null\r\n            }\r\n        case 'FETCH_BOOKS_SUCCESS':\r\n            return {\r\n                books: action.payload,\r\n                loading: false,\r\n                error: null\r\n            }\r\n\r\n        case 'FETCH_BOOKS_FAILURE':\r\n            return {\r\n                books: [],\r\n                loading: false,\r\n                error: action.payload\r\n            }\r\n        default:\r\n            return state.bookList;\r\n    }\r\n}\r\n\r\nexport default updateBookList;","const updateCartItems = (cartItems, item, idx) => {\r\n\r\n    if (item.count === 0) {\r\n        return [\r\n            ...cartItems.slice(0, idx),\r\n            ...cartItems.slice(idx + 1),\r\n        ]\r\n    }\r\n\r\n    if (idx === -1) {\r\n        return [\r\n            ...cartItems,\r\n            item\r\n        ]\r\n    }\r\n    return [\r\n        ...cartItems.slice(0, idx),\r\n        item,\r\n        ...cartItems.slice(idx + 1),\r\n    ]\r\n}\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n    const { id = book.id, count = 0, title = book.title, coverImage = book.coverImage, total = 0 } = item;\r\n    return {\r\n        id,\r\n        title,\r\n        count: count + quantity,\r\n        total: total + quantity * book.price,\r\n        bookPrice: book.price,\r\n        coverImage,\r\n    }\r\n}\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n    const { bookList: { books }, shoppingCart: { cartItems } } = state;\r\n\r\n    const book = books.find(({ id }) => id === bookId);\r\n    const itemIndex = cartItems.findIndex(({ id }) => id === bookId);\r\n    const item = cartItems[itemIndex];\r\n\r\n    const newItem = updateCartItem(book, item, quantity);\r\n    let newTotal = 0;\r\n    let newCount = 0;\r\n\r\n    const cartItemList = updateCartItems(cartItems, newItem, itemIndex)\r\n\r\n    cartItemList.forEach(item => newTotal += item.total);\r\n    cartItemList.forEach(item => newCount += item.count);\r\n\r\n\r\n    return {\r\n        cartItems: updateCartItems(cartItems, newItem, itemIndex),\r\n        orderTotal: newTotal,\r\n        count: newCount\r\n    }\r\n}\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n\r\n    if (state === undefined) {\r\n        return {\r\n            cartItems: [],\r\n            orderTotal: 0,\r\n            count: 0\r\n        }\r\n    }\r\n    switch (action.type) {\r\n        case 'BOOK_ADDED_TO_CART':\r\n            return updateOrder(state, action.payload, 1);\r\n        case 'BOOK_REMOVED_FROM_CART':\r\n            return updateOrder(state, action.payload, -1);\r\n\r\n        case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n            const item = state.shoppingCart.cartItems.find(({ id }) => id === action.payload)\r\n            return updateOrder(state, action.payload, -item.count)\r\n        default:\r\n            return state.shoppingCart;\r\n    }\r\n\r\n}\r\n\r\nexport default updateShoppingCart;","\r\nimport updateBookList from \"./book-list\";\r\nimport updateShoppingCart from './shopping-cart'\r\n\r\nconst reducer = (state, action) => {\r\n\r\n    return {\r\n        bookList: updateBookList(state, action),\r\n        shoppingCart: updateShoppingCart(state, action),\r\n    }\r\n}\r\n\r\nexport default reducer;\r\n\r\n\r\n","import { createStore } from 'redux';\r\nimport reducer from './reducers';\r\n\r\n\r\n\r\nconst store = createStore(reducer);\r\nstore.subscribe(() => console.log(store.getState()))\r\n\r\nexport default store;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\n\r\nimport App from './components/app/app';\r\nimport ErrorBoundry from './components/error-boundry/error-boundry';\r\nimport BookstoreService from './services/bookstore-service';\r\nimport { BookstoreServiceProvider } from './components/bookstore-service-context/bookstoreservicecontext';\r\n\r\nimport store from './store';\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <ErrorBoundry>\r\n            <BookstoreServiceProvider value={bookstoreService} >\r\n                <Router>\r\n                    <App />\r\n                </Router>\r\n            </BookstoreServiceProvider>\r\n        </ErrorBoundry>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);"],"sourceRoot":""}